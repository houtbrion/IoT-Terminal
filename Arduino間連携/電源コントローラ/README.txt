# 電源コントローラ

## 動作の概要
このプログラムは2つの動作モードにわけられる．
どちらの動作をさせるかはコンパイルオプションで
選択する．(SERIAL_COMとSHUTDOWN)

(1) シャットダウン信号モード

sleep中のArduinoが割り込みで起こされると，リレーをONにして待機する．
次に，シャットダウン信号が一定時間HIGHであり続けた場合に，リレーをOFFにする．

想定する使い方は，リレーにArduino用のACアダプタを繋いで，2台目のArduinoをリ
レーで電源投入する．何かの処理が終わったら，起こされたArduinoは特定のピンを
HIGHにすることで，起こしてくれたArduinoに処理が終了したことを知らせる．

これで，電源を制御元のArduinoは起こした子供は処理が終わったと見なして，
リレーをOFFにして電源を止める．その後は，自分もスリープ状態に入る．


(2) 処理結果待ちモード
リレーをONにしたあと，シリアルからの入力を待
ち，ある特定の文字が来るまで受信し，その文字列を別のシリアル回線に転送する．
その転送処理が終わったら，リレーで起こした子供の処理は終わったと見なして，電
源を落とす．
一応，子供の処理結果をBluetoothの評価モジュール(RN42ベースのもの)やXbeeのシ
リアルインターフェースに繋いで使うことを想定している．


## Xbeeの設定
Xbeeの設定は「デバイスATモード」かつ，スリープモード)は「1」にすることを
想定している．

